@startmindmap
'https://plantuml.com/mindmap-diagram

title Java volatile关键字

* volatile
** 定义
*** 易变的，Java提供的最轻量级的同步机制。
** 前因
*** 多核CPU缓存架构
**** 总线锁（强一致性）
**** 缓存一致性协议MSEI（弱一致性）
*** 多线程、工作内存和主内存关系
** 特性
*** 保证volatile变量在多线程间的可见性
*** 禁止指令重排序，保证有序性
*** 不保证原子性，如i++
** volatile底层实现原理
*** 字节码ACC_VOLATILE
**** 汇编指令lock addl
***** 内存屏障

** volatile优化
*** 按缓存行大小对齐优化


@endmindmap
